{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/db/schema.ts"],"sourcesContent":["import {\n  boolean,\n  index,\n  integer,\n  jsonb,\n  pgEnum,\n  pgTable,\n  primaryKey,\n  text,\n  timestamp,\n  uniqueIndex,\n  uuid,\n  varchar,\n} from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\n\nexport const projectTypeEnum = pgEnum(\"project_type\", [\n  \"project\",\n  \"relationship\",\n  \"area\",\n]);\n\nexport const projectStatusEnum = pgEnum(\"project_status\", [\n  \"active\",\n  \"on_hold\",\n  \"completed\",\n  \"archived\",\n]);\n\nexport const entryKindEnum = pgEnum(\"entry_kind\", [\n  \"meeting\",\n  \"update\",\n  \"decision\",\n  \"note\",\n  \"prep\",\n  \"reflection\",\n  \"self_note\",\n]);\n\nexport const commitmentDirectionEnum = pgEnum(\"commitment_direction\", [\n  \"i_owe\",\n  \"waiting_for\",\n]);\n\nexport const commitmentStatusEnum = pgEnum(\"commitment_status\", [\n  \"open\",\n  \"done\",\n  \"blocked\",\n  \"dropped\",\n]);\n\nexport const reflectionPeriodEnum = pgEnum(\"reflection_period_type\", [\n  \"week\",\n  \"month\",\n  \"quarter\",\n]);\n\nexport const users = pgTable(\"users\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  name: varchar(\"name\", { length: 120 }),\n  email: varchar(\"email\", { length: 255 }).notNull().unique(),\n  emailVerified: timestamp(\"email_verified\", { withTimezone: true }),\n  image: text(\"image\"),\n  hashedPassword: text(\"hashed_password\"),\n  timezone: varchar(\"timezone\", { length: 60 }).default(\"UTC\"),\n  locale: varchar(\"locale\", { length: 10 }).default(\"en-US\"),\n  role: varchar(\"role\", { length: 20 }).default(\"member\"),\n  createdAt: timestamp(\"created_at\", { withTimezone: true })\n    .notNull()\n    .defaultNow(),\n  updatedAt: timestamp(\"updated_at\", { withTimezone: true })\n    .notNull()\n    .defaultNow(),\n});\n\nexport const accounts = pgTable(\n  \"accounts\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    provider: varchar(\"provider\", { length: 255 }).notNull(),\n    providerAccountId: varchar(\"provider_account_id\", {\n      length: 255,\n    }).notNull(),\n    type: varchar(\"type\", { length: 255 }).notNull(),\n    refreshToken: text(\"refresh_token\"),\n    accessToken: text(\"access_token\"),\n    expiresAt: integer(\"expires_at\"),\n    tokenType: varchar(\"token_type\", { length: 50 }),\n    scope: text(\"scope\"),\n    idToken: text(\"id_token\"),\n    sessionState: text(\"session_state\"),\n  },\n  (table) => ({\n    providerIdx: uniqueIndex(\"accounts_provider_idx\").on(\n      table.provider,\n      table.providerAccountId,\n    ),\n  }),\n);\n\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    sessionToken: text(\"session_token\").notNull(),\n    expires: timestamp(\"expires\", { withTimezone: true }).notNull(),\n  },\n  (table) => ({\n    sessionTokenIdx: uniqueIndex(\"sessions_token_idx\").on(table.sessionToken),\n  }),\n);\n\nexport const verificationTokens = pgTable(\n  \"verification_tokens\",\n  {\n    identifier: varchar(\"identifier\", { length: 255 }).notNull(),\n    token: varchar(\"token\", { length: 255 }).notNull(),\n    expires: timestamp(\"expires\", { withTimezone: true }).notNull(),\n  },\n  (table) => ({\n    compositePk: primaryKey({\n      columns: [table.identifier, table.token],\n    }),\n  }),\n);\n\nexport const projects = pgTable(\n  \"projects\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    name: varchar(\"name\", { length: 180 }).notNull(),\n    description: text(\"description\"),\n    type: projectTypeEnum(\"type\").default(\"project\").notNull(),\n    status: projectStatusEnum(\"status\").default(\"active\").notNull(),\n    priority: integer(\"priority\").default(3).notNull(),\n    ownerNotes: text(\"owner_notes\"),\n    lastActiveAt: timestamp(\"last_active_at\", { withTimezone: true }).defaultNow(),\n    createdAt: timestamp(\"created_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n    updatedAt: timestamp(\"updated_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n  },\n  (table) => ({\n    projectUserIdx: index(\"projects_user_idx\").on(\n      table.userId,\n      table.lastActiveAt,\n    ),\n    projectStatusIdx: index(\"projects_status_idx\").on(table.status),\n  }),\n);\n\nexport const projectEntries = pgTable(\n  \"project_entries\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    projectId: uuid(\"project_id\")\n      .references(() => projects.id, { onDelete: \"cascade\" })\n      .notNull(),\n    kind: entryKindEnum(\"kind\").default(\"meeting\").notNull(),\n    title: varchar(\"title\", { length: 200 }).notNull(),\n    occurredAt: timestamp(\"occurred_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n    rawContent: text(\"raw_content\"),\n    aiSummary: text(\"ai_summary\"),\n    decisions: text(\"decisions\"),\n    aiSuggestedActions: jsonb(\"ai_suggested_actions\").$type<\n      Record<string, unknown>[]\n    >(),\n    isDecision: boolean(\"is_decision\").default(false).notNull(),\n    createdAt: timestamp(\"created_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n    updatedAt: timestamp(\"updated_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n  },\n  (table) => ({\n    entriesProjectIdx: index(\"entries_project_idx\").on(\n      table.projectId,\n      table.occurredAt,\n    ),\n    entriesUserIdx: index(\"entries_user_idx\").on(table.userId, table.kind),\n  }),\n);\n\nexport const commitments = pgTable(\n  \"commitments\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    projectId: uuid(\"project_id\")\n      .references(() => projects.id, { onDelete: \"cascade\" })\n      .notNull(),\n    entryId: uuid(\"entry_id\").references(() => projectEntries.id, {\n      onDelete: \"set null\",\n    }),\n    title: varchar(\"title\", { length: 200 }).notNull(),\n    direction: commitmentDirectionEnum(\"direction\")\n      .default(\"i_owe\")\n      .notNull(),\n    status: commitmentStatusEnum(\"status\").default(\"open\").notNull(),\n    counterparty: varchar(\"counterparty\", { length: 180 }),\n    dueDate: timestamp(\"due_date\", { withTimezone: true }),\n    importance: integer(\"importance\").default(3).notNull(),\n    urgency: integer(\"urgency\").default(3).notNull(),\n    notes: text(\"notes\"),\n    aiGenerated: boolean(\"ai_generated\").default(false).notNull(),\n    completedAt: timestamp(\"completed_at\", { withTimezone: true }),\n    createdAt: timestamp(\"created_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n    updatedAt: timestamp(\"updated_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n  },\n  (table) => ({\n    commitmentsDirectionIdx: index(\"commitments_direction_idx\").on(\n      table.userId,\n      table.direction,\n      table.status,\n    ),\n    commitmentsDueDateIdx: index(\"commitments_due_idx\").on(\n      table.userId,\n      table.dueDate,\n    ),\n  }),\n);\n\nexport const reflections = pgTable(\n  \"reflections\",\n  {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    userId: uuid(\"user_id\")\n      .references(() => users.id, { onDelete: \"cascade\" })\n      .notNull(),\n    periodType: reflectionPeriodEnum(\"period_type\").notNull(),\n    periodStart: timestamp(\"period_start\", { withTimezone: true }).notNull(),\n    periodEnd: timestamp(\"period_end\", { withTimezone: true }).notNull(),\n    stats: jsonb(\"stats\").$type<Record<string, unknown>>().notNull(),\n    questionsAndAnswers: jsonb(\"questions_answers\")\n      .$type<\n        Array<{\n          question: string;\n          answer: string;\n        }>\n      >()\n      .notNull(),\n    aiQuestions: jsonb(\"ai_questions\").$type<string[]>().notNull(),\n    createdAt: timestamp(\"created_at\", { withTimezone: true })\n      .notNull()\n      .defaultNow(),\n  },\n  (table) => ({\n    reflectionsPeriodIdx: index(\"reflections_period_idx\").on(\n      table.userId,\n      table.periodType,\n      table.periodStart,\n    ),\n  }),\n);\n\nexport const userRelations = relations(users, ({ many }) => ({\n  projects: many(projects),\n  entries: many(projectEntries),\n  commitments: many(commitments),\n  reflections: many(reflections),\n}));\n\nexport const projectRelations = relations(projects, ({ many }) => ({\n  entries: many(projectEntries),\n  commitments: many(commitments),\n}));\n\nexport const entryRelations = relations(projectEntries, ({ one, many }) => ({\n  project: one(projects, {\n    fields: [projectEntries.projectId],\n    references: [projects.id],\n  }),\n  commitments: many(commitments),\n}));\n\nexport const commitmentRelations = relations(commitments, ({ one }) => ({\n  project: one(projects, {\n    fields: [commitments.projectId],\n    references: [projects.id],\n  }),\n  entry: one(projectEntries, {\n    fields: [commitments.entryId],\n    references: [projectEntries.id],\n  }),\n}));\n\nexport const reflectionRelations = relations(reflections, ({ one }) => ({\n  user: one(users, {\n    fields: [reflections.userId],\n    references: [users.id],\n  }),\n}));\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/db/client.ts"],"sourcesContent":["import { neon, neonConfig } from \"@neondatabase/serverless\";\nimport { drizzle } from \"drizzle-orm/neon-http\";\n\nimport { env } from \"@/lib/config/env\";\nimport * as schema from \"./schema\";\n\nneonConfig.fetchConnectionCache = true;\n\nconst sql = neon(env.DATABASE_URL);\n\nexport const db = drizzle(sql, { schema });\n\nexport type DbClient = typeof db;\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AAEA;AACA;;;;;AAEA,oKAAU,CAAC,oBAAoB,GAAG;AAElC,MAAM,MAAM,IAAA,8JAAI,EAAC,kIAAG,CAAC,YAAY;AAE1B,MAAM,KAAK,IAAA,mKAAO,EAAC,KAAK;IAAE,QAAA;AAAO"}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/auth/password.ts"],"sourcesContent":["import bcrypt from \"bcryptjs\";\n\nconst WORK_FACTOR = 12;\n\nexport const hashPassword = async (password: string) => {\n  return bcrypt.hash(password, WORK_FACTOR);\n};\n\nexport const verifyPassword = async (\n  password: string,\n  hashedPassword: string,\n) => {\n  if (!hashedPassword) return false;\n  return bcrypt.compare(password, hashedPassword);\n};\n\n"],"names":[],"mappings":";;;;;;AAAA;;;;;;AAEA,MAAM,cAAc;AAEb,MAAM,eAAe,OAAO;IACjC,OAAO,2HAAM,CAAC,IAAI,CAAC,UAAU;AAC/B;AAEO,MAAM,iBAAiB,OAC5B,UACA;IAEA,IAAI,CAAC,gBAAgB,OAAO;IAC5B,OAAO,2HAAM,CAAC,OAAO,CAAC,UAAU;AAClC"}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/auth/options.ts"],"sourcesContent":["import { DrizzleAdapter } from \"@auth/drizzle-adapter\";\nimport type { NextAuthOptions } from \"next-auth\";\nimport CredentialsProvider from \"next-auth/providers/credentials\";\nimport { eq } from \"drizzle-orm\";\nimport { z } from \"zod\";\n\nimport { env } from \"@/lib/config/env\";\nimport { db } from \"@/lib/db/client\";\nimport { users } from \"@/lib/db/schema\";\nimport { verifyPassword } from \"@/lib/auth/password\";\n\nconst credentialsSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n});\n\nexport const authOptions: NextAuthOptions = {\n  adapter: DrizzleAdapter(db),\n  session: {\n    strategy: \"jwt\",\n  },\n  pages: {\n    signIn: \"/auth/signin\",\n  },\n  providers: [\n    CredentialsProvider({\n      name: \"Credentials\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      authorize: async (rawCredentials) => {\n        const parsed = credentialsSchema.safeParse(rawCredentials);\n        if (!parsed.success) {\n          return null;\n        }\n\n        const { email, password } = parsed.data;\n        const existingUser = await db.query.users.findFirst({\n          where: eq(users.email, email.toLowerCase()),\n        });\n\n        if (!existingUser?.hashedPassword) {\n          return null;\n        }\n\n        const valid = await verifyPassword(password, existingUser.hashedPassword);\n        if (!valid) {\n          return null;\n        }\n\n        return {\n          id: existingUser.id,\n          email: existingUser.email,\n          name: existingUser.name,\n        };\n      },\n    }),\n  ],\n  secret: env.NEXTAUTH_SECRET,\n  callbacks: {\n    async session({ session, token }) {\n      if (session.user && token.sub) {\n        session.user.id = token.sub;\n      }\n      return session;\n    },\n    async jwt({ token, user }) {\n      if (user?.id) {\n        token.sub = user.id;\n      }\n      return token;\n    },\n  },\n};\n\n"],"names":[],"mappings":";;;;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;AAEA,MAAM,oBAAoB,kLAAC,CAAC,MAAM,CAAC;IACjC,OAAO,kLAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,kLAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B;AAEO,MAAM,cAA+B;IAC1C,SAAS,IAAA,uKAAc,EAAC,gIAAE;IAC1B,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;IACV;IACA,WAAW;QACT,IAAA,mKAAmB,EAAC;YAClB,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,WAAW,OAAO;gBAChB,MAAM,SAAS,kBAAkB,SAAS,CAAC;gBAC3C,IAAI,CAAC,OAAO,OAAO,EAAE;oBACnB,OAAO;gBACT;gBAEA,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,OAAO,IAAI;gBACvC,MAAM,eAAe,MAAM,gIAAE,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC;oBAClD,OAAO,IAAA,wKAAE,EAAC,mIAAK,CAAC,KAAK,EAAE,MAAM,WAAW;gBAC1C;gBAEA,IAAI,CAAC,cAAc,gBAAgB;oBACjC,OAAO;gBACT;gBAEA,MAAM,QAAQ,MAAM,IAAA,gJAAc,EAAC,UAAU,aAAa,cAAc;gBACxE,IAAI,CAAC,OAAO;oBACV,OAAO;gBACT;gBAEA,OAAO;oBACL,IAAI,aAAa,EAAE;oBACnB,OAAO,aAAa,KAAK;oBACzB,MAAM,aAAa,IAAI;gBACzB;YACF;QACF;KACD;IACD,QAAQ,kIAAG,CAAC,eAAe;IAC3B,WAAW;QACT,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC9B,IAAI,QAAQ,IAAI,IAAI,MAAM,GAAG,EAAE;gBAC7B,QAAQ,IAAI,CAAC,EAAE,GAAG,MAAM,GAAG;YAC7B;YACA,OAAO;QACT;QACA,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACvB,IAAI,MAAM,IAAI;gBACZ,MAAM,GAAG,GAAG,KAAK,EAAE;YACrB;YACA,OAAO;QACT;IACF;AACF"}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/auth/session.ts"],"sourcesContent":["import { getServerSession } from \"next-auth\";\n\nimport { authOptions } from \"@/lib/auth/options\";\n\nexport const getCurrentSession = () => getServerSession(authOptions);\n\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;;;;AAEO,MAAM,oBAAoB,IAAM,IAAA,yJAAgB,EAAC,4IAAW"}},
    {"offset": {"line": 599, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/app/page.tsx"],"sourcesContent":["import { redirect } from \"next/navigation\";\n\nimport { getCurrentSession } from \"@/lib/auth/session\";\n\nexport default async function Home() {\n  const session = await getCurrentSession();\n\n  if (session?.user) {\n    redirect(\"/dashboard\");\n  }\n\n  redirect(\"/auth/signin\");\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAEA;;;;;;;AAEe,eAAe;IAC5B,MAAM,UAAU,MAAM,IAAA,kJAAiB;IAEvC,IAAI,SAAS,MAAM;QACjB,IAAA,iMAAQ,EAAC;IACX;IAEA,IAAA,iMAAQ,EAAC;AACX"}}]
}