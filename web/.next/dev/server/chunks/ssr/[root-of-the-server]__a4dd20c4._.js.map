{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 30, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 132, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 178, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,yHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 237, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/repositories/projects-repo.ts"],"sourcesContent":["import type { SQL } from \"drizzle-orm\";\nimport { and, desc, eq, gte, inArray, lte } from \"drizzle-orm\";\n\nimport { db } from \"@/lib/db/client\";\nimport type { DbClient } from \"@/lib/db/client\";\nimport { projects } from \"@/lib/db/schema\";\nimport type { NewProject } from \"@/lib/db/types\";\n\ntype ListProjectsFilters = {\n  status?: (typeof projects.$inferSelect.status)[];\n  type?: (typeof projects.$inferSelect.type)[];\n  priority?: number[];\n};\n\ntype IdleProjectsFilter = {\n  userId: string;\n  minPriority?: number;\n  lastActiveBefore: Date;\n};\n\nexport class ProjectsRepository {\n  constructor(private readonly database: DbClient = db) {}\n\n  private buildWhere(\n    conditions: Array<SQL | undefined>,\n  ): SQL | undefined {\n    const defined = conditions.filter(Boolean) as SQL[];\n    return defined.length ? and(...defined) : undefined;\n  }\n\n  async createProject(input: NewProject) {\n    const [created] = await this.database\n      .insert(projects)\n      .values(input)\n      .returning();\n\n    return created;\n  }\n\n  async updateProject(userId: string, projectId: string, input: Partial<NewProject>) {\n    const [updated] = await this.database\n      .update(projects)\n      .set({\n        ...input,\n        updatedAt: new Date(),\n      })\n      .where(and(eq(projects.id, projectId), eq(projects.userId, userId)))\n      .returning();\n\n    return updated ?? null;\n  }\n\n  async findById(userId: string, projectId: string) {\n    return this.database.query.projects.findFirst({\n      where: and(eq(projects.id, projectId), eq(projects.userId, userId)),\n    });\n  }\n\n  async listByUser(userId: string, filters: ListProjectsFilters = {}) {\n    const where = this.buildWhere([\n      eq(projects.userId, userId),\n      filters.status ? inArray(projects.status, filters.status) : undefined,\n      filters.type ? inArray(projects.type, filters.type) : undefined,\n      filters.priority ? inArray(projects.priority, filters.priority) : undefined,\n    ]);\n\n    return this.database.query.projects.findMany({\n      where,\n      orderBy: desc(projects.lastActiveAt),\n    });\n  }\n\n  async findIdleProjects(filter: IdleProjectsFilter) {\n    const where = this.buildWhere([\n      eq(projects.userId, filter.userId),\n      filter.minPriority ? gte(projects.priority, filter.minPriority) : undefined,\n      lte(projects.lastActiveAt, filter.lastActiveBefore),\n      eq(projects.status, \"active\"),\n    ]);\n\n    return this.database.query.projects.findMany({\n      where,\n      orderBy: desc(projects.priority),\n      limit: 5,\n    });\n  }\n\n  async updateLastActive(userId: string, projectId: string, lastActiveAt: Date) {\n    await this.database\n      .update(projects)\n      .set({ lastActiveAt, updatedAt: new Date() })\n      .where(\n        and(eq(projects.id, projectId), eq(projects.userId, userId)),\n      );\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/repositories/entries-repo.ts"],"sourcesContent":["import type { SQL } from \"drizzle-orm\";\nimport { and, desc, eq, gte, inArray, lte } from \"drizzle-orm\";\n\nimport { db } from \"@/lib/db/client\";\nimport type { DbClient } from \"@/lib/db/client\";\nimport { projectEntries } from \"@/lib/db/schema\";\nimport type { NewProjectEntry } from \"@/lib/db/types\";\n\ntype EntryFilters = {\n  kinds?: (typeof projectEntries.$inferSelect.kind)[];\n  occurredAfter?: Date;\n  occurredBefore?: Date;\n  projectId?: string;\n};\n\nexport class EntriesRepository {\n  constructor(private readonly database: DbClient = db) {}\n\n  private buildWhere(conditions: Array<SQL | undefined>) {\n    const defined = conditions.filter(Boolean) as SQL[];\n    return defined.length ? and(...defined) : undefined;\n  }\n\n  async createEntry(input: NewProjectEntry) {\n    const [created] = await this.database\n      .insert(projectEntries)\n      .values(input)\n      .returning();\n\n    return created;\n  }\n\n  async updateEntry(\n    userId: string,\n    entryId: string,\n    input: Partial<NewProjectEntry>,\n  ) {\n    const [updated] = await this.database\n      .update(projectEntries)\n      .set({ ...input, updatedAt: new Date() })\n      .where(and(eq(projectEntries.id, entryId), eq(projectEntries.userId, userId)))\n      .returning();\n\n    return updated ?? null;\n  }\n\n  async findById(userId: string, entryId: string) {\n    return this.database.query.projectEntries.findFirst({\n      where: and(eq(projectEntries.id, entryId), eq(projectEntries.userId, userId)),\n    });\n  }\n\n  async listByProject(\n    userId: string,\n    projectId: string,\n    filters: EntryFilters = {},\n  ) {\n    const where = this.buildWhere([\n      eq(projectEntries.projectId, projectId),\n      eq(projectEntries.userId, userId),\n      filters.kinds ? inArray(projectEntries.kind, filters.kinds) : undefined,\n      filters.occurredAfter\n        ? gte(projectEntries.occurredAt, filters.occurredAfter)\n        : undefined,\n      filters.occurredBefore\n        ? lte(projectEntries.occurredAt, filters.occurredBefore)\n        : undefined,\n    ]);\n\n    return this.database.query.projectEntries.findMany({\n      where,\n      orderBy: desc(projectEntries.occurredAt),\n    });\n  }\n\n  async listForUser(userId: string, filters: EntryFilters = {}) {\n    const where = this.buildWhere([\n      eq(projectEntries.userId, userId),\n      filters.projectId ? eq(projectEntries.projectId, filters.projectId) : undefined,\n      filters.kinds ? inArray(projectEntries.kind, filters.kinds) : undefined,\n      filters.occurredAfter\n        ? gte(projectEntries.occurredAt, filters.occurredAfter)\n        : undefined,\n      filters.occurredBefore\n        ? lte(projectEntries.occurredAt, filters.occurredBefore)\n        : undefined,\n    ]);\n\n    return this.database.query.projectEntries.findMany({\n      where,\n      orderBy: desc(projectEntries.occurredAt),\n    });\n  }\n\n  async listByKind(userId: string, kind: typeof projectEntries.$inferSelect.kind) {\n    return this.database.query.projectEntries.findMany({\n      where: and(eq(projectEntries.userId, userId), eq(projectEntries.kind, kind)),\n      orderBy: desc(projectEntries.occurredAt),\n      limit: 20,\n    });\n  }\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 383, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/repositories/commitments-repo.ts"],"sourcesContent":["import type { SQL } from \"drizzle-orm\";\nimport { and, desc, eq, gte, inArray, lte } from \"drizzle-orm\";\n\nimport { db } from \"@/lib/db/client\";\nimport type { DbClient } from \"@/lib/db/client\";\nimport { commitments } from \"@/lib/db/schema\";\nimport type { NewCommitment } from \"@/lib/db/types\";\n\ntype CommitmentFilters = {\n  directions?: (typeof commitments.$inferSelect.direction)[];\n  statuses?: (typeof commitments.$inferSelect.status)[];\n  projectId?: string;\n  dueBefore?: Date;\n  dueAfter?: Date;\n};\n\nexport class CommitmentsRepository {\n  constructor(private readonly database: DbClient = db) {}\n\n  private buildWhere(conditions: Array<SQL | undefined>) {\n    const defined = conditions.filter(Boolean) as SQL[];\n    return defined.length ? and(...defined) : undefined;\n  }\n\n  async createCommitment(input: NewCommitment) {\n    const [created] = await this.database\n      .insert(commitments)\n      .values(input)\n      .returning();\n    return created;\n  }\n\n  async createMany(inputs: NewCommitment[]) {\n    if (!inputs.length) return [];\n    return this.database.insert(commitments).values(inputs).returning();\n  }\n\n  async listCommitments(userId: string, filters: CommitmentFilters = {}) {\n    const where = this.buildWhere([\n      eq(commitments.userId, userId),\n      filters.projectId ? eq(commitments.projectId, filters.projectId) : undefined,\n      filters.directions\n        ? inArray(commitments.direction, filters.directions)\n        : undefined,\n      filters.statuses ? inArray(commitments.status, filters.statuses) : undefined,\n      filters.dueAfter ? gte(commitments.dueDate, filters.dueAfter) : undefined,\n      filters.dueBefore ? lte(commitments.dueDate, filters.dueBefore) : undefined,\n    ]);\n\n    return this.database.query.commitments.findMany({\n      where,\n      orderBy: desc(commitments.dueDate),\n    });\n  }\n\n  async findById(userId: string, commitmentId: string) {\n    return this.database.query.commitments.findFirst({\n      where: and(eq(commitments.id, commitmentId), eq(commitments.userId, userId)),\n    });\n  }\n\n  async updateCommitment(\n    userId: string,\n    commitmentId: string,\n    input: Partial<NewCommitment>,\n  ) {\n    const [updated] = await this.database\n      .update(commitments)\n      .set({ ...input, updatedAt: new Date() })\n      .where(and(eq(commitments.id, commitmentId), eq(commitments.userId, userId)))\n      .returning();\n\n    return updated ?? null;\n  }\n}\n\n"],"names":[],"mappings":";;;;AACA;AAAA;AAEA;AAEA;;;;AAWO,MAAM;;IACX,YAAY,AAAiB,WAAqB,gIAAE,CAAE;aAAzB,WAAA;IAA0B;IAE/C,WAAW,UAAkC,EAAE;QACrD,MAAM,UAAU,WAAW,MAAM,CAAC;QAClC,OAAO,QAAQ,MAAM,GAAG,IAAA,yKAAG,KAAI,WAAW;IAC5C;IAEA,MAAM,iBAAiB,KAAoB,EAAE;QAC3C,MAAM,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,MAAM,CAAC,yIAAW,EAClB,MAAM,CAAC,OACP,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,WAAW,MAAuB,EAAE;QACxC,IAAI,CAAC,OAAO,MAAM,EAAE,OAAO,EAAE;QAC7B,OAAO,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,yIAAW,EAAE,MAAM,CAAC,QAAQ,SAAS;IACnE;IAEA,MAAM,gBAAgB,MAAc,EAAE,UAA6B,CAAC,CAAC,EAAE;QACrE,MAAM,QAAQ,IAAI,CAAC,UAAU,CAAC;YAC5B,IAAA,wKAAE,EAAC,yIAAW,CAAC,MAAM,EAAE;YACvB,QAAQ,SAAS,GAAG,IAAA,wKAAE,EAAC,yIAAW,CAAC,SAAS,EAAE,QAAQ,SAAS,IAAI;YACnE,QAAQ,UAAU,GACd,IAAA,6KAAO,EAAC,yIAAW,CAAC,SAAS,EAAE,QAAQ,UAAU,IACjD;YACJ,QAAQ,QAAQ,GAAG,IAAA,6KAAO,EAAC,yIAAW,CAAC,MAAM,EAAE,QAAQ,QAAQ,IAAI;YACnE,QAAQ,QAAQ,GAAG,IAAA,yKAAG,EAAC,yIAAW,CAAC,OAAO,EAAE,QAAQ,QAAQ,IAAI;YAChE,QAAQ,SAAS,GAAG,IAAA,yKAAG,EAAC,yIAAW,CAAC,OAAO,EAAE,QAAQ,SAAS,IAAI;SACnE;QAED,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC;YAC9C;YACA,SAAS,IAAA,sKAAI,EAAC,yIAAW,CAAC,OAAO;QACnC;IACF;IAEA,MAAM,SAAS,MAAc,EAAE,YAAoB,EAAE;QACnD,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC;YAC/C,OAAO,IAAA,yKAAG,EAAC,IAAA,wKAAE,EAAC,yIAAW,CAAC,EAAE,EAAE,eAAe,IAAA,wKAAE,EAAC,yIAAW,CAAC,MAAM,EAAE;QACtE;IACF;IAEA,MAAM,iBACJ,MAAc,EACd,YAAoB,EACpB,KAA6B,EAC7B;QACA,MAAM,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,MAAM,CAAC,yIAAW,EAClB,GAAG,CAAC;YAAE,GAAG,KAAK;YAAE,WAAW,IAAI;QAAO,GACtC,KAAK,CAAC,IAAA,yKAAG,EAAC,IAAA,wKAAE,EAAC,yIAAW,CAAC,EAAE,EAAE,eAAe,IAAA,wKAAE,EAAC,yIAAW,CAAC,MAAM,EAAE,UACnE,SAAS;QAEZ,OAAO,WAAW;IACpB;AACF"}},
    {"offset": {"line": 442, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/repositories/reflections-repo.ts"],"sourcesContent":["import type { SQL } from \"drizzle-orm\";\nimport { and, desc, eq } from \"drizzle-orm\";\n\nimport { db } from \"@/lib/db/client\";\nimport type { DbClient } from \"@/lib/db/client\";\nimport { reflections } from \"@/lib/db/schema\";\nimport type { NewReflection } from \"@/lib/db/types\";\n\ntype ReflectionFilters = {\n  periodType?: typeof reflections.$inferSelect.periodType;\n};\n\nexport class ReflectionsRepository {\n  constructor(private readonly database: DbClient = db) {}\n\n  private buildWhere(conditions: Array<SQL | undefined>) {\n    const defined = conditions.filter(Boolean) as SQL[];\n    return defined.length ? and(...defined) : undefined;\n  }\n\n  async createReflection(input: NewReflection) {\n    const [created] = await this.database\n      .insert(reflections)\n      .values(input)\n      .returning();\n    return created;\n  }\n\n  async listReflections(userId: string, filters: ReflectionFilters = {}) {\n    const where = this.buildWhere([\n      eq(reflections.userId, userId),\n      filters.periodType ? eq(reflections.periodType, filters.periodType) : undefined,\n    ]);\n\n    return this.database.query.reflections.findMany({\n      where,\n      orderBy: desc(reflections.periodStart),\n    });\n  }\n\n  async findByPeriod(\n    userId: string,\n    periodType: typeof reflections.$inferSelect.periodType,\n    periodStart: Date,\n  ) {\n    return this.database.query.reflections.findFirst({\n      where: and(\n        eq(reflections.userId, userId),\n        eq(reflections.periodType, periodType),\n        eq(reflections.periodStart, periodStart),\n      ),\n    });\n  }\n}\n\n"],"names":[],"mappings":";;;;AACA;AAAA;AAEA;AAEA;;;;AAOO,MAAM;;IACX,YAAY,AAAiB,WAAqB,gIAAE,CAAE;aAAzB,WAAA;IAA0B;IAE/C,WAAW,UAAkC,EAAE;QACrD,MAAM,UAAU,WAAW,MAAM,CAAC;QAClC,OAAO,QAAQ,MAAM,GAAG,IAAA,yKAAG,KAAI,WAAW;IAC5C;IAEA,MAAM,iBAAiB,KAAoB,EAAE;QAC3C,MAAM,CAAC,QAAQ,GAAG,MAAM,IAAI,CAAC,QAAQ,CAClC,MAAM,CAAC,yIAAW,EAClB,MAAM,CAAC,OACP,SAAS;QACZ,OAAO;IACT;IAEA,MAAM,gBAAgB,MAAc,EAAE,UAA6B,CAAC,CAAC,EAAE;QACrE,MAAM,QAAQ,IAAI,CAAC,UAAU,CAAC;YAC5B,IAAA,wKAAE,EAAC,yIAAW,CAAC,MAAM,EAAE;YACvB,QAAQ,UAAU,GAAG,IAAA,wKAAE,EAAC,yIAAW,CAAC,UAAU,EAAE,QAAQ,UAAU,IAAI;SACvE;QAED,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC;YAC9C;YACA,SAAS,IAAA,sKAAI,EAAC,yIAAW,CAAC,WAAW;QACvC;IACF;IAEA,MAAM,aACJ,MAAc,EACd,UAAsD,EACtD,WAAiB,EACjB;QACA,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC;YAC/C,OAAO,IAAA,yKAAG,EACR,IAAA,wKAAE,EAAC,yIAAW,CAAC,MAAM,EAAE,SACvB,IAAA,wKAAE,EAAC,yIAAW,CAAC,UAAU,EAAE,aAC3B,IAAA,wKAAE,EAAC,yIAAW,CAAC,WAAW,EAAE;QAEhC;IACF;AACF"}},
    {"offset": {"line": 486, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/repositories/index.ts"],"sourcesContent":["export * from \"./projects-repo\";\nexport * from \"./entries-repo\";\nexport * from \"./commitments-repo\";\nexport * from \"./reflections-repo\";\n\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/projects-service.ts"],"sourcesContent":["import type { NewProject, Project } from \"@/lib/db/types\";\nimport { ProjectsRepository } from \"@/lib/repositories\";\n\ntype CreateProjectInput = Omit<\n  NewProject,\n  \"id\" | \"userId\" | \"createdAt\" | \"updatedAt\" | \"lastActiveAt\"\n>;\n\ntype UpdateProjectInput = Partial<CreateProjectInput>;\n\nexport class ProjectsService {\n  constructor(private readonly projectsRepo = new ProjectsRepository()) {}\n\n  async createProject(userId: string, input: CreateProjectInput): Promise<Project> {\n    return this.projectsRepo.createProject({\n      ...input,\n      userId,\n    });\n  }\n\n  async updateProject(userId: string, projectId: string, input: UpdateProjectInput) {\n    return this.projectsRepo.updateProject(userId, projectId, input);\n  }\n\n  async getProject(userId: string, projectId: string) {\n    return this.projectsRepo.findById(userId, projectId);\n  }\n\n  async listProjects(userId: string) {\n    return this.projectsRepo.listByUser(userId);\n  }\n\n  async markProjectActive(userId: string, projectId: string) {\n    await this.projectsRepo.updateLastActive(userId, projectId, new Date());\n  }\n\n  async findIdleProjects(userId: string, daysIdle = 45) {\n    const lastActiveBefore = new Date();\n    lastActiveBefore.setDate(lastActiveBefore.getDate() - daysIdle);\n    return this.projectsRepo.findIdleProjects({\n      userId,\n      lastActiveBefore,\n      minPriority: 3,\n    });\n  }\n}\n\n"],"names":[],"mappings":";;;;AACA;AAAA;;AASO,MAAM;;IACX,YAAY,AAAiB,eAAe,IAAI,oKAAkB,EAAE,CAAE;aAAzC,eAAA;IAA0C;IAEvE,MAAM,cAAc,MAAc,EAAE,KAAyB,EAAoB;QAC/E,OAAO,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC;YACrC,GAAG,KAAK;YACR;QACF;IACF;IAEA,MAAM,cAAc,MAAc,EAAE,SAAiB,EAAE,KAAyB,EAAE;QAChF,OAAO,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,QAAQ,WAAW;IAC5D;IAEA,MAAM,WAAW,MAAc,EAAE,SAAiB,EAAE;QAClD,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,QAAQ;IAC5C;IAEA,MAAM,aAAa,MAAc,EAAE;QACjC,OAAO,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC;IACtC;IAEA,MAAM,kBAAkB,MAAc,EAAE,SAAiB,EAAE;QACzD,MAAM,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,QAAQ,WAAW,IAAI;IAClE;IAEA,MAAM,iBAAiB,MAAc,EAAE,WAAW,EAAE,EAAE;QACpD,MAAM,mBAAmB,IAAI;QAC7B,iBAAiB,OAAO,CAAC,iBAAiB,OAAO,KAAK;QACtD,OAAO,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC;YACxC;YACA;YACA,aAAa;QACf;IACF;AACF"}},
    {"offset": {"line": 543, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/ai/providers/openai-client.ts"],"sourcesContent":["import OpenAI from \"openai\";\n\nimport type {\n  AiClient,\n  PrepBriefingInput,\n  PrepBriefingResult,\n  ReflectionPromptInput,\n  ReflectionPromptResult,\n  SummarizeMeetingInput,\n  SummarizeMeetingResult,\n} from \"@/lib/ai/types\";\n\ntype CreateOpenAiClientOptions = {\n  apiKey: string;\n};\n\nconst model = \"gpt-4.1-mini\";\n\ntype JsonSchemaBody = {\n  type: \"object\";\n  properties: Record<string, unknown>;\n  required?: string[];\n  additionalProperties?: boolean;\n};\n\ntype ResponseWithOutput = {\n  output_text?: string;\n};\n\nconst parseJsonOutput = <T>(response: ResponseWithOutput) => {\n  const text = response.output_text;\n  if (!text) {\n    throw new Error(\"AI response missing output_text\");\n  }\n  return JSON.parse(text) as T;\n};\n\nconst createJsonRequest = async <T>({\n  client,\n  prompt,\n  schemaName,\n  schemaBody,\n}: {\n  client: OpenAI;\n  prompt: string;\n  schemaName: string;\n  schemaBody: JsonSchemaBody;\n}) => {\n  const response = await client.responses.create({\n    model,\n    input: prompt,\n    temperature: 0.4,\n    text: {\n      format: {\n        type: \"json_schema\",\n        name: schemaName,\n        schema: schemaBody,\n        strict: true,\n      },\n    },\n  } as unknown as Parameters<typeof client.responses.create>[0]);\n\n  return parseJsonOutput<T>(response as ResponseWithOutput);\n};\n\nexport const createOpenAiClient = ({\n  apiKey,\n}: CreateOpenAiClientOptions): AiClient => {\n  const client = new OpenAI({ apiKey });\n\n  const summarizeMeeting = async (\n    input: SummarizeMeetingInput,\n  ): Promise<SummarizeMeetingResult> => {\n    const prompt = [\n      \"You are Chief of Staff AI.\",\n      \"Summarize the following meeting or update, capturing background, key takeaways, and decisions.\",\n      \"Extract actionable commitments with direction (i_owe or waiting_for).\",\n      `Meeting transcript:\\n${input.rawContent}`,\n      input.projectContext ? `Project context: ${input.projectContext}` : \"\",\n    ]\n      .filter(Boolean)\n      .join(\"\\n\\n\");\n\n    return createJsonRequest<SummarizeMeetingResult>({\n      client,\n      prompt,\n      schemaName: \"meeting_summary\",\n      schemaBody: {\n        type: \"object\",\n        properties: {\n          summary: { type: \"string\" },\n          keyDecisions: {\n            type: \"array\",\n            items: { type: \"string\" },\n          },\n          openQuestions: {\n            type: \"array\",\n            items: { type: \"string\" },\n          },\n          suggestedActions: {\n            type: \"array\",\n            items: {\n              type: \"object\",\n              properties: {\n                title: { type: \"string\" },\n                direction: { type: \"string\", enum: [\"i_owe\", \"waiting_for\"] },\n                counterparty: { type: \"string\" },\n                dueDate: { type: \"string\" },\n                notes: { type: \"string\" },\n                importance: { type: \"integer\" },\n                urgency: { type: \"integer\" },\n              },\n              required: [\"title\", \"direction\"],\n              additionalProperties: false,\n            },\n          },\n        },\n        required: [\"summary\", \"keyDecisions\", \"openQuestions\", \"suggestedActions\"],\n        additionalProperties: false,\n      },\n    });\n  };\n\n  const generatePrepBriefing = async (\n    input: PrepBriefingInput,\n  ): Promise<PrepBriefingResult> => {\n    const prompt = [\n      `Project: ${input.projectName}`,\n      `Recent entries:\\n${JSON.stringify(input.entries)}`,\n      `Outstanding commitments:\\n${JSON.stringify(input.commitments)}`,\n      \"Generate a concise prep briefing and 3-5 bullet talking points.\",\n    ].join(\"\\n\\n\");\n\n    return createJsonRequest<PrepBriefingResult>({\n      client,\n      prompt,\n      schemaName: \"prep_briefing\",\n      schemaBody: {\n        type: \"object\",\n        properties: {\n          briefing: { type: \"string\" },\n          talkingPoints: {\n            type: \"array\",\n            items: { type: \"string\" },\n          },\n        },\n        required: [\"briefing\", \"talkingPoints\"],\n        additionalProperties: false,\n      },\n    });\n  };\n\n  const generateReflectionPrompts = async (\n    input: ReflectionPromptInput,\n  ): Promise<ReflectionPromptResult> => {\n    const prompt = [\n      `Timeframe: ${input.timeframe}`,\n      `Stats snapshot:\\n${JSON.stringify(input.stats)}`,\n      \"Create reflective questions and improvement suggestions tailored to a senior leader.\",\n    ].join(\"\\n\\n\");\n\n    return createJsonRequest<ReflectionPromptResult>({\n      client,\n      prompt,\n      schemaName: \"reflection_prompts\",\n      schemaBody: {\n        type: \"object\",\n        properties: {\n          questions: {\n            type: \"array\",\n            items: { type: \"string\" },\n          },\n          suggestions: {\n            type: \"array\",\n            items: { type: \"string\" },\n          },\n        },\n        required: [\"questions\", \"suggestions\"],\n        additionalProperties: false,\n      },\n    });\n  };\n\n  return {\n    summarizeMeeting,\n    generatePrepBriefing,\n    generateReflectionPrompts,\n  };\n};\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 733, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/ai/client.ts"],"sourcesContent":["import { env } from \"@/lib/config/env\";\nimport { createOpenAiClient } from \"./providers/openai-client\";\nimport type { AiClient } from \"./types\";\n\nlet aiClient: AiClient | null = null;\n\nexport const getAiClient = (): AiClient => {\n  if (aiClient) {\n    return aiClient;\n  }\n\n  if (env.AI_PROVIDER === \"openai\") {\n    aiClient = createOpenAiClient({ apiKey: env.OPENAI_API_KEY });\n    return aiClient;\n  }\n\n  throw new Error(`Unsupported AI provider: ${env.AI_PROVIDER}`);\n};\n\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAGA,IAAI,WAA4B;AAEzB,MAAM,cAAc;IACzB,IAAI,UAAU;QACZ,OAAO;IACT;IAEA,IAAI,kIAAG,CAAC,WAAW,KAAK,UAAU;QAChC,WAAW,IAAA,uKAAkB,EAAC;YAAE,QAAQ,kIAAG,CAAC,cAAc;QAAC;QAC3D,OAAO;IACT;IAEA,MAAM,IAAI,MAAM,CAAC,yBAAyB,EAAE,kIAAG,CAAC,WAAW,EAAE;AAC/D"}},
    {"offset": {"line": 758, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/entries-service.ts"],"sourcesContent":["import type { SuggestedAction } from \"@/lib/ai/types\";\nimport { getAiClient } from \"@/lib/ai/client\";\nimport type { NewProjectEntry, ProjectEntry } from \"@/lib/db/types\";\nimport { CommitmentsRepository, EntriesRepository, ProjectsRepository } from \"@/lib/repositories\";\n\ntype CreateEntryInput = Omit<\n  NewProjectEntry,\n  \"id\" | \"userId\" | \"projectId\" | \"createdAt\" | \"updatedAt\"\n>;\n\nexport class EntriesService {\n  constructor(\n    private readonly entriesRepo = new EntriesRepository(),\n    private readonly projectsRepo = new ProjectsRepository(),\n    private readonly commitmentsRepo = new CommitmentsRepository(),\n  ) {}\n\n  async createEntry(userId: string, projectId: string, input: CreateEntryInput) {\n    const entry = await this.entriesRepo.createEntry({\n      ...input,\n      userId,\n      projectId,\n    });\n\n    await this.projectsRepo.updateLastActive(userId, projectId, input.occurredAt ?? new Date());\n    return entry;\n  }\n\n  async getTimeline(userId: string, projectId: string) {\n    return this.entriesRepo.listByProject(userId, projectId);\n  }\n\n  async markAsDecision(userId: string, entryId: string) {\n    return this.entriesRepo.updateEntry(userId, entryId, { isDecision: true });\n  }\n\n  async getEntry(userId: string, entryId: string) {\n    return this.entriesRepo.findById(userId, entryId);\n  }\n\n  async generateSummary(entry: ProjectEntry, projectContext?: string) {\n    const ai = getAiClient();\n    return ai.summarizeMeeting({\n      rawContent: entry.rawContent ?? \"\",\n      projectContext,\n    });\n  }\n\n  async persistSummary(\n    userId: string,\n    entryId: string,\n    summary: string,\n    suggestedActions: SuggestedAction[],\n  ) {\n    await this.entriesRepo.updateEntry(userId, entryId, {\n      aiSummary: summary,\n      aiSuggestedActions: suggestedActions,\n    });\n  }\n\n  async createCommitmentsFromSuggestions(\n    userId: string,\n    projectId: string,\n    entryId: string,\n    suggestions: SuggestedAction[],\n  ) {\n    const payload = suggestions.map((suggestion) => ({\n      userId,\n      projectId,\n      entryId,\n      title: suggestion.title,\n      direction: suggestion.direction,\n      counterparty: suggestion.counterparty,\n      dueDate: suggestion.dueDate ? new Date(suggestion.dueDate) : null,\n      importance: suggestion.importance ?? 3,\n      urgency: suggestion.urgency ?? 3,\n      notes: suggestion.notes,\n      aiGenerated: true,\n    }));\n\n    return this.commitmentsRepo.createMany(payload);\n  }\n}\n\n"],"names":[],"mappings":";;;;AACA;AAEA;AAAA;AAAA;AAAA;;;AAOO,MAAM;;;;IACX,YACE,AAAiB,cAAc,IAAI,kKAAiB,EAAE,EACtD,AAAiB,eAAe,IAAI,oKAAkB,EAAE,EACxD,AAAiB,kBAAkB,IAAI,0KAAqB,EAAE,CAC9D;aAHiB,cAAA;aACA,eAAA;aACA,kBAAA;IAChB;IAEH,MAAM,YAAY,MAAc,EAAE,SAAiB,EAAE,KAAuB,EAAE;QAC5E,MAAM,QAAQ,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;YAC/C,GAAG,KAAK;YACR;YACA;QACF;QAEA,MAAM,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,QAAQ,WAAW,MAAM,UAAU,IAAI,IAAI;QACpF,OAAO;IACT;IAEA,MAAM,YAAY,MAAc,EAAE,SAAiB,EAAE;QACnD,OAAO,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,QAAQ;IAChD;IAEA,MAAM,eAAe,MAAc,EAAE,OAAe,EAAE;QACpD,OAAO,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,SAAS;YAAE,YAAY;QAAK;IAC1E;IAEA,MAAM,SAAS,MAAc,EAAE,OAAe,EAAE;QAC9C,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,QAAQ;IAC3C;IAEA,MAAM,gBAAgB,KAAmB,EAAE,cAAuB,EAAE;QAClE,MAAM,KAAK,IAAA,yIAAW;QACtB,OAAO,GAAG,gBAAgB,CAAC;YACzB,YAAY,MAAM,UAAU,IAAI;YAChC;QACF;IACF;IAEA,MAAM,eACJ,MAAc,EACd,OAAe,EACf,OAAe,EACf,gBAAmC,EACnC;QACA,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ,SAAS;YAClD,WAAW;YACX,oBAAoB;QACtB;IACF;IAEA,MAAM,iCACJ,MAAc,EACd,SAAiB,EACjB,OAAe,EACf,WAA8B,EAC9B;QACA,MAAM,UAAU,YAAY,GAAG,CAAC,CAAC,aAAe,CAAC;gBAC/C;gBACA;gBACA;gBACA,OAAO,WAAW,KAAK;gBACvB,WAAW,WAAW,SAAS;gBAC/B,cAAc,WAAW,YAAY;gBACrC,SAAS,WAAW,OAAO,GAAG,IAAI,KAAK,WAAW,OAAO,IAAI;gBAC7D,YAAY,WAAW,UAAU,IAAI;gBACrC,SAAS,WAAW,OAAO,IAAI;gBAC/B,OAAO,WAAW,KAAK;gBACvB,aAAa;YACf,CAAC;QAED,OAAO,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC;IACzC;AACF"}},
    {"offset": {"line": 832, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/commitments-service.ts"],"sourcesContent":["import type { CommitmentDirection } from \"@/lib/ai/types\";\nimport { commitments } from \"@/lib/db/schema\";\nimport type { NewCommitment } from \"@/lib/db/types\";\nimport { CommitmentsRepository } from \"@/lib/repositories\";\n\ntype CreateCommitmentInput = Omit<\n  NewCommitment,\n  \"id\" | \"userId\" | \"createdAt\" | \"updatedAt\"\n>;\n\ntype ListCommitmentsInput = {\n  directions?: CommitmentDirection[];\n  statuses?: Array<typeof commitments.$inferSelect.status>;\n  projectId?: string;\n};\n\nexport class CommitmentsService {\n  constructor(private readonly commitmentsRepo = new CommitmentsRepository()) {}\n\n  async createCommitment(userId: string, input: CreateCommitmentInput) {\n    return this.commitmentsRepo.createCommitment({\n      ...input,\n      userId,\n    });\n  }\n\n  async listCommitments(userId: string, filters: ListCommitmentsInput = {}) {\n    return this.commitmentsRepo.listCommitments(userId, filters);\n  }\n\n  async updateStatus(\n    userId: string,\n    commitmentId: string,\n    status: typeof commitments.$inferSelect.status,\n  ) {\n    return this.commitmentsRepo.updateCommitment(userId, commitmentId, {\n      status,\n      completedAt: status === \"done\" ? new Date() : null,\n    });\n  }\n\n  async updateCommitment(\n    userId: string,\n    commitmentId: string,\n    input: Partial<CreateCommitmentInput>,\n  ) {\n    return this.commitmentsRepo.updateCommitment(userId, commitmentId, input);\n  }\n}\n\n"],"names":[],"mappings":";;;;AAGA;AAAA;;AAaO,MAAM;;IACX,YAAY,AAAiB,kBAAkB,IAAI,0KAAqB,EAAE,CAAE;aAA/C,kBAAA;IAAgD;IAE7E,MAAM,iBAAiB,MAAc,EAAE,KAA4B,EAAE;QACnE,OAAO,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC;YAC3C,GAAG,KAAK;YACR;QACF;IACF;IAEA,MAAM,gBAAgB,MAAc,EAAE,UAAgC,CAAC,CAAC,EAAE;QACxE,OAAO,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ;IACtD;IAEA,MAAM,aACJ,MAAc,EACd,YAAoB,EACpB,MAA8C,EAC9C;QACA,OAAO,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,QAAQ,cAAc;YACjE;YACA,aAAa,WAAW,SAAS,IAAI,SAAS;QAChD;IACF;IAEA,MAAM,iBACJ,MAAc,EACd,YAAoB,EACpB,KAAqC,EACrC;QACA,OAAO,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,QAAQ,cAAc;IACrE;AACF"}},
    {"offset": {"line": 867, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/reflections-service.ts"],"sourcesContent":["import { getAiClient } from \"@/lib/ai/client\";\nimport type { ReflectionPromptResult } from \"@/lib/ai/types\";\nimport { reflections } from \"@/lib/db/schema\";\nimport type { NewReflection } from \"@/lib/db/types\";\nimport {\n  CommitmentsRepository,\n  EntriesRepository,\n  ReflectionsRepository,\n} from \"@/lib/repositories\";\n\ntype ReflectionPeriod = typeof reflections.$inferSelect.periodType;\n\ntype ReflectionQuestionAnswer = {\n  question: string;\n  answer: string;\n};\n\nexport class ReflectionsService {\n  constructor(\n    private readonly reflectionsRepo = new ReflectionsRepository(),\n    private readonly entriesRepo = new EntriesRepository(),\n    private readonly commitmentsRepo = new CommitmentsRepository(),\n  ) {}\n\n  async listReflections(userId: string, periodType?: ReflectionPeriod) {\n    return this.reflectionsRepo.listReflections(userId, { periodType });\n  }\n\n  async generateReflection(\n    userId: string,\n    periodType: ReflectionPeriod,\n    periodStart: Date,\n    periodEnd: Date,\n  ): Promise<ReflectionPromptResult & { stats: Record<string, unknown> }> {\n    const entries = await this.entriesRepo.listForUser(userId, {\n      occurredAfter: periodStart,\n      occurredBefore: periodEnd,\n    });\n\n    const commitmentsList = await this.commitmentsRepo.listCommitments(userId, {\n      dueAfter: periodStart,\n      dueBefore: periodEnd,\n    });\n\n    const stats = {\n      meetingCount: entries.filter((entry) => entry.kind === \"meeting\").length,\n      decisionCount: entries.filter((entry) => entry.isDecision).length,\n      openCommitments: commitmentsList.filter((c) => c.status === \"open\").length,\n      waitingFor: commitmentsList.filter((c) => c.direction === \"waiting_for\").length,\n      iOwe: commitmentsList.filter((c) => c.direction === \"i_owe\").length,\n    };\n\n    const ai = getAiClient();\n    const prompts = await ai.generateReflectionPrompts({\n      timeframe: `${periodType} ${periodStart.toISOString()} - ${periodEnd.toISOString()}`,\n      stats,\n    });\n\n    return { ...prompts, stats };\n  }\n\n  async saveReflection(\n    userId: string,\n    data: {\n      periodType: ReflectionPeriod;\n      periodStart: Date;\n      periodEnd: Date;\n      stats: Record<string, unknown>;\n      questionsAndAnswers: ReflectionQuestionAnswer[];\n      aiQuestions: string[];\n    },\n  ) {\n    const payload: NewReflection = {\n      userId,\n      periodType: data.periodType,\n      periodStart: data.periodStart,\n      periodEnd: data.periodEnd,\n      stats: data.stats,\n      questionsAndAnswers: data.questionsAndAnswers,\n      aiQuestions: data.aiQuestions,\n    };\n\n    return this.reflectionsRepo.createReflection(payload);\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AAIA;AAAA;AAAA;AAAA;;;AAaO,MAAM;;;;IACX,YACE,AAAiB,kBAAkB,IAAI,0KAAqB,EAAE,EAC9D,AAAiB,cAAc,IAAI,kKAAiB,EAAE,EACtD,AAAiB,kBAAkB,IAAI,0KAAqB,EAAE,CAC9D;aAHiB,kBAAA;aACA,cAAA;aACA,kBAAA;IAChB;IAEH,MAAM,gBAAgB,MAAc,EAAE,UAA6B,EAAE;QACnE,OAAO,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ;YAAE;QAAW;IACnE;IAEA,MAAM,mBACJ,MAAc,EACd,UAA4B,EAC5B,WAAiB,EACjB,SAAe,EACuD;QACtE,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ;YACzD,eAAe;YACf,gBAAgB;QAClB;QAEA,MAAM,kBAAkB,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ;YACzE,UAAU;YACV,WAAW;QACb;QAEA,MAAM,QAAQ;YACZ,cAAc,QAAQ,MAAM,CAAC,CAAC,QAAU,MAAM,IAAI,KAAK,WAAW,MAAM;YACxE,eAAe,QAAQ,MAAM,CAAC,CAAC,QAAU,MAAM,UAAU,EAAE,MAAM;YACjE,iBAAiB,gBAAgB,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,QAAQ,MAAM;YAC1E,YAAY,gBAAgB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK,eAAe,MAAM;YAC/E,MAAM,gBAAgB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK,SAAS,MAAM;QACrE;QAEA,MAAM,KAAK,IAAA,yIAAW;QACtB,MAAM,UAAU,MAAM,GAAG,yBAAyB,CAAC;YACjD,WAAW,GAAG,WAAW,CAAC,EAAE,YAAY,WAAW,GAAG,GAAG,EAAE,UAAU,WAAW,IAAI;YACpF;QACF;QAEA,OAAO;YAAE,GAAG,OAAO;YAAE;QAAM;IAC7B;IAEA,MAAM,eACJ,MAAc,EACd,IAOC,EACD;QACA,MAAM,UAAyB;YAC7B;YACA,YAAY,KAAK,UAAU;YAC3B,aAAa,KAAK,WAAW;YAC7B,WAAW,KAAK,SAAS;YACzB,OAAO,KAAK,KAAK;YACjB,qBAAqB,KAAK,mBAAmB;YAC7C,aAAa,KAAK,WAAW;QAC/B;QAEA,OAAO,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC;IAC/C;AACF"}},
    {"offset": {"line": 935, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/dashboard-service.ts"],"sourcesContent":["import { CommitmentsRepository, EntriesRepository, ProjectsRepository } from \"@/lib/repositories\";\n\nexport class DashboardService {\n  constructor(\n    private readonly commitmentsRepo = new CommitmentsRepository(),\n    private readonly projectsRepo = new ProjectsRepository(),\n    private readonly entriesRepo = new EntriesRepository(),\n  ) {}\n\n  async getWeeklyFocus(userId: string) {\n    const commitments = await this.commitmentsRepo.listCommitments(userId, {\n      directions: [\"i_owe\"],\n      statuses: [\"open\"],\n    });\n\n    return commitments\n      .sort((a, b) => {\n        const importanceDiff = (b.importance ?? 0) - (a.importance ?? 0);\n        if (importanceDiff !== 0) return importanceDiff;\n        const urgencyDiff = (b.urgency ?? 0) - (a.urgency ?? 0);\n        if (urgencyDiff !== 0) return urgencyDiff;\n        const dueA = a.dueDate ? new Date(a.dueDate).getTime() : Infinity;\n        const dueB = b.dueDate ? new Date(b.dueDate).getTime() : Infinity;\n        return dueA - dueB;\n      })\n      .slice(0, 5);\n  }\n\n  async getIdleProjects(userId: string) {\n    return this.projectsRepo.findIdleProjects({\n      userId,\n      lastActiveBefore: new Date(Date.now() - 45 * 24 * 60 * 60 * 1000),\n      minPriority: 3,\n    });\n  }\n\n  async getPendingReviews(userId: string) {\n    const entries = await this.entriesRepo.listForUser(userId, {\n      kinds: [\"decision\"],\n    });\n\n    const decisionsNeedingReview = entries.filter((entry) => !entry.aiSummary).length;\n\n    return {\n      decisionsNeedingReview,\n      pendingReflections: 0,\n    };\n  }\n\n  async getDashboardData(userId: string) {\n    const [weeklyFocus, idleProjects, pending] = await Promise.all([\n      this.getWeeklyFocus(userId),\n      this.getIdleProjects(userId),\n      this.getPendingReviews(userId),\n    ]);\n\n    return {\n      weeklyFocus,\n      idleProjects,\n      pending,\n    };\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;;AAEO,MAAM;;;;IACX,YACE,AAAiB,kBAAkB,IAAI,0KAAqB,EAAE,EAC9D,AAAiB,eAAe,IAAI,oKAAkB,EAAE,EACxD,AAAiB,cAAc,IAAI,kKAAiB,EAAE,CACtD;aAHiB,kBAAA;aACA,eAAA;aACA,cAAA;IAChB;IAEH,MAAM,eAAe,MAAc,EAAE;QACnC,MAAM,cAAc,MAAM,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,QAAQ;YACrE,YAAY;gBAAC;aAAQ;YACrB,UAAU;gBAAC;aAAO;QACpB;QAEA,OAAO,YACJ,IAAI,CAAC,CAAC,GAAG;YACR,MAAM,iBAAiB,CAAC,EAAE,UAAU,IAAI,CAAC,IAAI,CAAC,EAAE,UAAU,IAAI,CAAC;YAC/D,IAAI,mBAAmB,GAAG,OAAO;YACjC,MAAM,cAAc,CAAC,EAAE,OAAO,IAAI,CAAC,IAAI,CAAC,EAAE,OAAO,IAAI,CAAC;YACtD,IAAI,gBAAgB,GAAG,OAAO;YAC9B,MAAM,OAAO,EAAE,OAAO,GAAG,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAAK;YACzD,MAAM,OAAO,EAAE,OAAO,GAAG,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAAK;YACzD,OAAO,OAAO;QAChB,GACC,KAAK,CAAC,GAAG;IACd;IAEA,MAAM,gBAAgB,MAAc,EAAE;QACpC,OAAO,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC;YACxC;YACA,kBAAkB,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK,KAAK;YAC5D,aAAa;QACf;IACF;IAEA,MAAM,kBAAkB,MAAc,EAAE;QACtC,MAAM,UAAU,MAAM,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ;YACzD,OAAO;gBAAC;aAAW;QACrB;QAEA,MAAM,yBAAyB,QAAQ,MAAM,CAAC,CAAC,QAAU,CAAC,MAAM,SAAS,EAAE,MAAM;QAEjF,OAAO;YACL;YACA,oBAAoB;QACtB;IACF;IAEA,MAAM,iBAAiB,MAAc,EAAE;QACrC,MAAM,CAAC,aAAa,cAAc,QAAQ,GAAG,MAAM,QAAQ,GAAG,CAAC;YAC7D,IAAI,CAAC,cAAc,CAAC;YACpB,IAAI,CAAC,eAAe,CAAC;YACrB,IAAI,CAAC,iBAAiB,CAAC;SACxB;QAED,OAAO;YACL;YACA;YACA;QACF;IACF;AACF"}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/lib/services/index.ts"],"sourcesContent":["export * from \"./projects-service\";\nexport * from \"./entries-service\";\nexport * from \"./commitments-service\";\nexport * from \"./reflections-service\";\nexport * from \"./dashboard-service\";\n\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1025, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackchen/Desktop/Coding/leader-dojo/web/src/app/%28authenticated%29/dashboard/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { redirect } from \"next/navigation\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { DashboardService } from \"@/lib/services\";\nimport { getCurrentSession } from \"@/lib/auth/session\";\n\nconst dashboardService = new DashboardService();\n\nexport default async function DashboardPage() {\n  const session = await getCurrentSession();\n  if (!session?.user?.id) {\n    redirect(\"/auth/signin\");\n  }\n\n  const data = await dashboardService.getDashboardData(session.user.id);\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"text-3xl font-semibold tracking-tight\">Weekly focus</h1>\n        <p className=\"text-muted-foreground\">\n          AI-prioritized commitments and projects that need your attention this week.\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 sm:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Top commitments</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {data.weeklyFocus.length === 0 ? (\n              <p className=\"text-sm text-muted-foreground\">No open commitments right now.</p>\n            ) : (\n              data.weeklyFocus.map((item) => (\n                <div key={item.id} className=\"rounded-lg border p-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <p className=\"font-medium\">{item.title}</p>\n                    <Badge variant={item.direction === \"i_owe\" ? \"default\" : \"secondary\"}>\n                      {item.direction === \"i_owe\" ? \"I Owe\" : \"Waiting For\"}\n                    </Badge>\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {item.counterparty ? `Counterparty: ${item.counterparty}` : \"No counterparty\"}\n                  </p>\n                </div>\n              ))\n            )}\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Idle projects</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {data.idleProjects.length === 0 ? (\n              <p className=\"text-sm text-muted-foreground\">\n                All priority projects have recent activity.\n              </p>\n            ) : (\n              data.idleProjects.map((project) => (\n                <div key={project.id} className=\"rounded-lg border p-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"font-medium\">{project.name}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        Last update: {project.lastActiveAt?.toLocaleDateString() ?? \"Unknown\"}\n                      </p>\n                    </div>\n                    <Badge variant=\"secondary\">Priority {project.priority}</Badge>\n                  </div>\n                </div>\n              ))\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Pending reviews</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex gap-8 text-sm\">\n          <div>\n            <p className=\"text-3xl font-semibold\">{data.pending.decisionsNeedingReview}</p>\n            <p className=\"text-muted-foreground\">Decisions awaiting summary</p>\n          </div>\n          <div>\n            <p className=\"text-3xl font-semibold\">{data.pending.pendingReflections}</p>\n            <p className=\"text-muted-foreground\">Reflections to capture</p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Reflection & decisions</CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div>\n            <p className=\"text-sm text-muted-foreground\">\n              Capture lessons from this week and close the loop on open decisions.\n            </p>\n          </div>\n          <div className=\"flex gap-3\">\n            <Button variant=\"outline\" asChild>\n              <Link href=\"/commitments\">Review commitments</Link>\n            </Button>\n            <Button asChild>\n              <Link href=\"/reflections\">Start reflection</Link>\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}