module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},50645,a=>{a.n(a.i(27572))},23576,a=>{a.n(a.i(4858))},25210,a=>{a.n(a.i(2747))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},96763,a=>{a.n(a.i(67894))},35330,a=>{"use strict";var b=a.i(7997),c=a.i(39138);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},47755,a=>{"use strict";var b=a.i(63507);a.i(9320);var c=a.i(5293),d=a.i(92558),e=a.i(51151);class f{projectsRepo;entriesRepo;commitmentsRepo;constructor(a=new e.ProjectsRepository,b=new d.EntriesRepository,f=new c.CommitmentsRepository){this.projectsRepo=a,this.entriesRepo=b,this.commitmentsRepo=f}async generateBriefing(a,c){let d=await this.projectsRepo.findById(a,c);if(!d)return null;let[e,f]=await Promise.all([this.entriesRepo.listByProject(a,c,{kinds:["meeting","update","decision"]}),this.commitmentsRepo.listCommitments(a,{projectId:c,statuses:["open"]})]),g=(0,b.getAiClient)(),h=await g.generatePrepBriefing({projectName:d.name,entries:e.slice(0,10).map(a=>({occurredAt:a.occurredAt?.toISOString()??"",kind:a.kind,content:a.aiSummary??a.rawContent??a.title})),commitments:f.map(a=>({title:a.title,direction:a.direction,dueDate:a.dueDate?.toISOString(),counterparty:a.counterparty??void 0,status:a.status}))});return{project:d,entries:e,commitments:f,briefing:h}}}a.s(["PrepService",()=>f])},65624,a=>a.a(async(b,c)=>{try{var d=a.i(7997);a.i(70396);var e=a.i(73727),f=a.i(35330),g=a.i(47755),h=a.i(58840),i=b([h]);[h]=i.then?(await i)():i;let k=new g.PrepService;async function j({params:a}){let b=await (0,h.getCurrentSession)();b?.user?.id||(0,e.redirect)("/auth/signin");let c=await k.generateBriefing(b.user.id,a.id);return c||(0,e.notFound)(),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"Prep"}),(0,d.jsx)("h1",{className:"text-3xl font-semibold",children:c.project.name})]}),(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsx)(f.CardTitle,{children:"Briefing"})}),(0,d.jsxs)(f.CardContent,{children:[(0,d.jsx)("p",{className:"whitespace-pre-line text-sm text-muted-foreground",children:c.briefing.briefing}),(0,d.jsx)("ul",{className:"mt-4 list-disc pl-4 text-sm",children:c.briefing.talkingPoints.map(a=>(0,d.jsx)("li",{children:a},a))})]})]}),(0,d.jsxs)(f.Card,{children:[(0,d.jsx)(f.CardHeader,{children:(0,d.jsx)(f.CardTitle,{children:"Outstanding commitments"})}),(0,d.jsx)(f.CardContent,{className:"space-y-3",children:0===c.commitments.length?(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"No open commitments."}):c.commitments.map(a=>(0,d.jsxs)("div",{className:"rounded-lg border p-3",children:[(0,d.jsx)("p",{className:"font-medium",children:a.title}),(0,d.jsxs)("p",{className:"text-sm text-muted-foreground",children:["i_owe"===a.direction?"You owe":"Waiting for"," Â·"," ",a.counterparty??"Unassigned"]})]},a.id))})]})]})}a.s(["default",()=>j]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__a35d31a9._.js.map