(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,type:r,...n}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}e.s(["Input",()=>r])},10204,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(74080);var r=e.i(91918),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{let i=(0,r.createSlot)(`Primitive.${n}`),l=a.forwardRef((e,a)=>{let{asChild:r,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(r?i:n,{...l,ref:a})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{}),i=a.forwardRef((e,a)=>(0,t.jsx)(n.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=e.i(75157);function s({className:e,...a}){return(0,t.jsx)(i,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>s],10204)},24687,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}e.s(["Textarea",()=>r])},84774,e=>{"use strict";var t=e.i(43476),a=e.i(75157);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...r})})}function n({className:e,...r}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...r})}function i({className:e,...r}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...r})}function l({className:e,...r}){return(0,t.jsx)("tfoot",{"data-slot":"table-footer",className:(0,a.cn)("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",e),...r})}function s({className:e,...r}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...r})}function o({className:e,...r}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function d({className:e,...r}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r})}function c({className:e,...r}){return(0,t.jsx)("caption",{"data-slot":"table-caption",className:(0,a.cn)("text-muted-foreground mt-4 text-sm",e),...r})}e.s(["Table",()=>r,"TableBody",()=>i,"TableCaption",()=>c,"TableCell",()=>d,"TableFooter",()=>l,"TableHead",()=>o,"TableHeader",()=>n,"TableRow",()=>s])},87971,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(19455),n=e.i(15288),i=e.i(93479),l=e.i(10204),s=e.i(67489),o=e.i(24687);let d=[{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Quarter",value:"quarter"}];e.s(["ReflectionWizard",0,()=>{let[e,c]=(0,a.useState)("week"),[u,b]=(0,a.useState)(""),[p,x]=(0,a.useState)([]),[m,g]=(0,a.useState)({}),[f,h]=(0,a.useState)([]),[v,j]=(0,a.useState)("idle"),[w,y]=(0,a.useState)(null),N=(0,a.useMemo)(()=>{if(!u)return null;let t=new Date(u);if(Number.isNaN(t.getTime()))return null;let a=new Date(t);return"week"===e?a.setDate(a.getDate()+6):"month"===e?(a.setMonth(a.getMonth()+1),a.setDate(a.getDate()-1)):"quarter"===e&&(a.setMonth(a.getMonth()+3),a.setDate(a.getDate()-1)),a},[u,e]),S=async()=>{if(!u||!N)return;j("loading"),y(null),x([]);let t=await fetch("/api/secure/reflections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({periodType:e,periodStart:u,periodEnd:N.toISOString()})});if(!t.ok){y((await t.json().catch(()=>({}))).message??"Unable to generate prompts"),j("idle");return}let a=await t.json();x(a.questions??[]),h(a.suggestions??[]),g({}),j("idle")},T=async()=>{if(!u||!N||!p.length)return;j("saving"),y(null);let t=await fetch("/api/secure/reflections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({periodType:e,periodStart:u,periodEnd:N.toISOString(),answers:p.map(e=>({question:e,answer:m[e]??""}))})});if(!t.ok){y((await t.json().catch(()=>({}))).message??"Unable to save reflection"),j("idle");return}j("idle"),x([]),h([]),g({})};return(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"New reflection"})}),(0,t.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Period type"}),(0,t.jsxs)(s.Select,{value:e,onValueChange:c,children:[(0,t.jsx)(s.SelectTrigger,{children:(0,t.jsx)(s.SelectValue,{})}),(0,t.jsx)(s.SelectContent,{children:d.map(e=>(0,t.jsx)(s.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Label,{children:"Start date"}),(0,t.jsx)(i.Input,{type:"date",value:u,onChange:e=>b(e.target.value)})]})]}),(0,t.jsx)(r.Button,{onClick:S,disabled:!u||"loading"===v,variant:"outline",children:"loading"===v?"Generating...":"Generate AI questions"}),w?(0,t.jsx)("p",{className:"text-sm text-destructive",children:w}):null,f.length?(0,t.jsxs)("div",{className:"rounded-lg border p-3 text-sm text-muted-foreground space-y-2",children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:"Suggestions"}),(0,t.jsx)("ul",{className:"list-disc pl-4",children:f.map(e=>(0,t.jsx)("li",{children:e},e))})]}):null,p.length?(0,t.jsxs)("div",{className:"space-y-4",children:[p.map(e=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{children:e}),(0,t.jsx)(o.Textarea,{value:m[e]??"",onChange:t=>g(a=>({...a,[e]:t.target.value})),className:"min-h-[120px]"})]},e)),(0,t.jsx)(r.Button,{onClick:T,disabled:"saving"===v,children:"saving"===v?"Saving...":"Save reflection"})]}):null]})]})}])}]);